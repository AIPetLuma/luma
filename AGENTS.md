# 仓库 Agent 约束

## 适用范围

- 适用于本仓库及其 `docs` 子模块中的所有 AI Agent 操作。

## 强制规则

1. **禁止读取内部`dev.json`文件**

- 禁止读取工作区的 secrets 文件，包括 `dev.json`。
- 允许替代：仅可使用 `dev.example.json` 查看变量结构。
- 若确需运行时参数，必须让用户显式提供“非敏感值”。

2. **禁止在 `main` 分支修改代码**

- 任何修改前必须先检查：
  - 主模块分支：`git branch --show-current`
  - 子模块分支：`git -C docs branch --show-current`
- 若任一仓库在 `main`，必须先将主模块与子模块切到同名的非 `main` 分支，再执行修改。
- 若主模块与子模块分支名不一致，必须先对齐成同名分支再修改。

## 修改前必做检查

- 检查主模块与子模块当前分支。
- 确认两者均不在 `main` 且分支名一致。
- 满足后才能执行文件修改。

## 失败即停止（Fail Closed）

- 只要任一规则无法满足，立即停止修改并向用户确认下一步。
